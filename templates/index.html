<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up & Sign In</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="main-container">
        <h1>Welcome!</h1>
        <button onclick="showForm('signup-form')">Sign Up</button>
        <button onclick="showForm('signin-form')">Sign In</button>

        <div id="signup-form" class="form-box">
            <h2>Sign Up</h2>
            <form action="/signup" method="POST">
                <input type="text" name="name" placeholder="Name" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <button type="submit">Sign Up</button>
            </form>
        </div>

        <div id="signin-form" class="form-box" onsubmit="return validateForm()">
            <h2>Sign In</h2>
            <form action="/signin" method="POST">
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <button type="submit">Sign In</button>
            </form>
        </div>
    </div>
    <script>
        function validateForm() {
        const email = document.getElementById('email').value;
        const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!email.match(emailRegex)) {
            alert('Please enter a valid email address.');
            return false;
        }

        const password = document.getElementById('password').value;
        if (password.length < 8) {
            alert('Password must be at least 8 characters long.');
            return false;
        }

        return true;
        }

        function showForm(formId) {
            const forms = document.querySelectorAll('.form-box');
            forms.forEach(form => form.classList.remove('visible'));

            // Show the selected form
            const selectedForm = document.getElementById(formId);
            selectedForm.classList.add('visible');
        }
        async function submitCardForm(event) {
            event.preventDefault();

            const form = document.getElementById('payment-card-form');
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            try {
                const response = await fetch('/add_card', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                });

                const result = await response.json();
                if (response.ok) {
                    alert('Card successfully added: ' + JSON.stringify(result));
                } else {
                    alert('Error: ' + JSON.stringify(result));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An unexpected error occurred.');
            }
        }
    </script>
</body>
</html>
